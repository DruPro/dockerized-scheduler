on:
  push:
    branches:
      - production

jobs:
  docker-start:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3  # This step is necessary to ensure the repo is checked out

    - name: Docker Setup Buildx
      uses: docker/setup-buildx-action@v3.7.1

    - name: Creating API Container
      run: | 
        docker build -t test_api:v1 ./API  # Correct path to the API directory
        docker run --name api_instance -d test_api:v1
        docker ps

    - name: Closing API
      run: |
        docker stop api_instance  # Corrected syntax for stopping the container
